cmake_minimum_required( VERSION 3.2 )
project( gtk-tutorial )

set( EXTERNAL_PREFIX_DIR "${CMAKE_BINARY_DIR}/install" )
set( CMAKE_PREFIX_PATH "${EXTERNAL_PREFIX_DIR}" )
set( CMAKE_MODULE_PATH "${CMAKE_CURRENT_SOURCE_DIR}/cmake"
	${CMAKE_MODULE_PATH} )

set( CMAKE_C_STANDARD 11 )
set( CMAKE_C_STANDARD_REQUIRED ON )

set( CMAKE_CXX_STANDARD 14 )
set( CMAKE_CXX_STANDARD_REQUIRED ON )

set( BUILD_ENV
	PKG_CONFIG_PATH=${EXTERNAL_PREFIX_DIR}/lib/pkgconfig
	C_INCLUDE_PATH=${EXTERNAL_PREFIX_DIR}/include
	LD_LIBRARY_PATH=${EXTERNAL_PREFIX_DIR}/lib
)

#include( cmakepp/cmakepp.cmake )
include( external )

ExternalProject_Add( tutorial
	SOURCE_DIR "${CMAKE_CURRENT_SOURCE_DIR}/tutorial"
	CMAKE_CACHE_ARGS -DCMAKE_PREFIX_PATH:string=${EXTERNAL_PREFIX_DIR} -DCMAKE_INSTALL_PREFIX:path=${EXTERNAL_PREFIX_DIR}
	DEPENDS build_gtk
	BUILD_ALWAYS 1
)
